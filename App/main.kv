
#:kivy 2.3.0

TabManager:
    Home:
    Menu:
    Programar:
    Historico:
    Configuracion:

<Home>:
    name: "home"

    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'top'
        padding: 30

        canvas.before:
            Color:
                rgba: 0.6, 0.6, 0.6, 1  
            Rectangle:
                pos: self.pos
                size: self.size
    
        GridLayout:
            cols: 1
            size_hint: (1, 0.2)
            row_default_height: '48dp'
            row_force_default: True

            Label:
                text: "Sistema de Riego"
                font_size: 68
                bold: True
            Label:
                text: "INSM 2024"
                font_size: 40
            

    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'center'

        GridLayout:
            size_hint: 0.5, 0.5
            cols: 1
            spacing: '30dp'

            GridLayout:
                cols: 1
                row_default_height: '60dp'
                row_force_default: True

                Label:
                    text: "Aspersores"
                    font_size: 60
                    bold: True
                MySwitch:
                    id: aspersores

            BoxLayout:
                orientation: 'vertical'
                spacing: '20dp'

                Label:
                    text: "Humedad del suelo"
                    font_size: 46
                    bold: True
                Label:
                    id: humidity
                    text: "97%"
                    font_size: 50
                Label:
                    text: "Ultimo riego"
                    font_size: 46
                    bold: True
                Label:
                    id: last_time
                    text: "22:30"
                    font_size: 50
                                   
    AnchorLayout:
        anchor_x: 'right'
        anchor_y: 'bottom'
        padding: '20dp'

        Button:
            text: "Burger"
            size_hint: 0.15, 0.05
            on_release:
                app.root.current = "menu"
                root.manager.transition.direction = "left"

<Menu>:
    name: "menu"
    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'center'
        
        canvas.before:
            Color:
                rgba: 0.6, 0.6, 0.6, 1  
            Rectangle:
                pos: self.pos
                size: self.size

        GridLayout:
            size_hint: 0.75, 0.3
            cols: 1
            spacing: '20dp'

            Button:
                text: "Programar\nHORARIO de riego"
                size_hint: None, None
                size: 200, 100
                on_release: root.go_to_programar()

            Button:
                text: "Ver\nHISTORICO"
                size_hint: None, None
                size: 200, 100
                on_release: root.go_to_historico()

            Button:
                text: "Configuración\nde la APP"
                size_hint: None, None
                size: 200, 100
                on_release: root.go_to_configuracion()

    AnchorLayout:
        anchor_x: 'left'
        anchor_y: 'bottom'
        padding: '20dp'

        Button:
            text: "Return"
            size_hint: 0.15, 0.05
            on_release:
                app.root.current = "home"
                root.manager.transition.direction = "right"

<Programar>:
    start_hour_spinner: start_hour_spinner
    start_minute_spinner: start_minute_spinner
    end_hour_spinner: end_hour_spinner
    end_minute_spinner: end_minute_spinner

    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'Configurar Horario de Riego'
        GridLayout:
            cols: 2
            Label:
                text: 'Hora de inicio:'
            Spinner:
                id: start_hour_spinner
                text: '0'
                values: [str(i) for i in range(25)]
            Label:
                text: 'Minuto de inicio:'
            Spinner:
                id: start_minute_spinner
                text: '0'
                values: [str(i) for i in range(60)]
            Label:
                text: 'Hora de fin:'
            Spinner:
                id: end_hour_spinner
                text: '0'
                values: [str(i) for i in range(25)]
            Label:
                text: 'Minuto de fin:'
            Spinner:
                id: end_minute_spinner
                text: '0'
                values: [str(i) for i in range(60)]
        Button:
            text: 'Guardar'
            on_release: root.save_schedule()
        Button:
            text: "Volver"
            on_release: root.manager.current = "menu"


<Historico>:
    name: "historico"
    Label:
        text: "Pantalla de Historial"
        font_size: 30

<Configuracion>:
    name: "configuracion"
    Label:
        text: "Pantalla de Configuración"
        font_size: 30

